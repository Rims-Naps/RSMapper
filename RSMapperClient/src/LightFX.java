public class LightFX {
   static int anInt4089;
   protected boolean aBoolean4090;
   static int anInt4091;
   protected int plane;
   private int anInt4093;
   int anInt4094;
   static int anInt4095;
   static Index index30;
   static float[] aFloatArray4097 = new float[]{1.0F, 0.0F, 0.0F, 0.0F, 0.0F, 1.0F, 0.0F, 0.0F, 0.0F, 0.0F, 1.0F, 0.0F, 0.0F, 0.0F, 0.0F, 1.0F};
   static int anInt4098;
   static int anInt4099;
   protected Node_Sub29 aNode_Sub29_4100;
   static int anInt4101;
   protected boolean aBoolean4102;
   static int anInt4103;
   private int anInt4104;
   protected short[] aShortArray4105;
   private int anInt4106;
   private int anInt4107;
   static double aDouble4108;
   static boolean aBoolean4109 = false;
   protected int anInt4110;
   static int anInt4111;

   public static void method3815(int i) {
      aFloatArray4097 = null;
      index30 = null;
      if (i != 4) {
         Node_Sub43.aBoolean7231 = true;
         aBoolean4109 = false;
      }
   }

   final void method3816(boolean bool, int i, byte b) {
      ++anInt4095;
      int i_0_ = -46 / ((61 - b) / 47);
      int i_1_;
      if (!bool) {
         int i_2_ = 2047 & i * this.anInt4104 / 50 + this.anInt4094;
         int i_3_ = this.anInt4107;
         if (~i_3_ != -2) {
            if (~i_3_ != -4) {
               if (i_3_ != 4) {
                  if (i_3_ != 2) {
                     if (i_3_ == 5) {
                        i_1_ = (i_2_ < 1024 ? i_2_ : 2048 - i_2_) << 1;
                     } else {
                        i_1_ = 2048;
                     }
                  } else {
                     i_1_ = i_2_;
                  }
               } else {
                  i_1_ = i_2_ >> 10 << 11;
               }
            } else {
               i_1_ = CacheNode_Sub20.anIntArray9628[i_2_] >> 1;
            }
         } else {
            i_1_ = 1024 + (Class335.anIntArray4167[i_2_ << 3] >> 4);
         }
      } else {
         i_1_ = 2048;
      }

      this.aNode_Sub29_4100.method2712((byte)73, (float)((this.anInt4093 * i_1_ >> 11) + this.anInt4106) / 2048.0F);
   }

   static final int method3817(boolean bool, long l) {
      Node_Sub43.method2941(6, l);
      ++anInt4103;
      if (!bool) {
         method3815(-116);
      }

      return Class141.aCalendar1756.get(1);
   }

   static final String method3818(long l, byte b, int i) {
      ++anInt4101;
      Node_Sub43.method2941(6, l);
      if (b != 73) {
         method3815(49);
      }

      int i_4_ = Class141.aCalendar1756.get(5);
      int i_5_ = 1 + Class141.aCalendar1756.get(2);
      int i_6_ = Class141.aCalendar1756.get(1);
      return Integer.toString(i_4_ / 10) + i_4_ % 10 + "/" + i_5_ / 10 + i_5_ % 10 + "/" + i_6_ % 100 / 10 + i_6_ % 10;
   }

   final void method3819(int i, byte b, int i_7_, int i_8_, int i_9_) {
      this.anInt4104 = i_9_;
      if (b != -27) {
         this.method3819(-113, (byte)-62, 106, 65, -59);
      }

      ++anInt4111;
      this.anInt4106 = i;
      this.anInt4107 = i_7_;
      this.anInt4093 = i_8_;
   }

   static final void method3820(int i) {
      Class290_Sub7.aClass71_8134.method746(5, -3452);
      ++anInt4091;
      r.aClass58_9578.method580(-13, 5);
      Class42.aClass181_643.method1828(5, 123);
      Class186.aClass112_2256.method1146(5, 500);
      Class366.aClass279_4526.method3369(5, -759);
      EntityNode_Sub3_Sub1.aClass86_9166.method1003(250, 5);
      if (i <= -73) {
         Class18.aClass37_306.method396(0, 5);
         Class16.aClass101_228.method1094(127, 5);
         IOException_Sub1.aClass128_85.method1551(75, 5);
         Class188_Sub2_Sub1.aClass229_9354.method2126(5, (byte)108);
         Class336.aClass315_4173.method3657(5, (byte)-107);
         Class291_Sub1.aClass13_8198.method211(5, (byte)94);
         InputStream_Sub2.aClass281_83.method3380(5, true);
         Class304.aClass215_3834.method2066(5, 0);
         Node_Sub54.aClass338_7671.method3914(5, 34);
         Class188_Sub2_Sub2.aClass36_9366.method391(64, 5);
         Class146.aClass32_1812.method355(-2, 5);
         Class171.aClass278_2062.method3362(5, 29);
         CacheNode_Sub6.aClass57_9480.method572(5, (byte)-120);
         Class32.aClass359_508.method4038(-127, 5);
         Class186.aClass239_2249.method3023(33, 5);
         Node_Sub9_Sub4.aClass180_9727.method1820(5, 4);
         Class296.aClass186_5429.method1873(-111, 5);
         Packet.method2258(false, 5);
         Class282.method3386(50, (byte)-44);
         Class215.method2065(45, 50);
         Class110.method1129((byte)110, 5);
         Class320_Sub7.method3710((byte)-20, 5);
         Class125.aClass61_1609.method598(5, -11819);
         Node_Sub51.aClass61_7628.method598(5, -11819);
         Class262_Sub18.aClass61_7842.method598(5, -11819);
         CacheNode_Sub12.aClass61_9556.method598(5, -11819);
         ClientScriptsExecutor.aClass61_3867.method598(5, -11819);
      }
   }

   public final void method3821(GraphicsToolkit graphicstoolkit, int referenceY, int height, int referenceX, int color, int flickerType, int i_14_) {
      this.aNode_Sub29_4100 = graphicstoolkit.a(referenceX, height, referenceY, flickerType, color, (float)i_14_);
      ++anInt4099;
   }

   final void method3822(int i) {
      if (i != 0) {
         this.method3822(99);
      }

      int i_15_ = this.anInt4110;
      if (i_15_ != 2) {
         if (~i_15_ != -4) {
            if (~i_15_ != -5) {
               if (~i_15_ != -6) {
                  if (i_15_ != 12) {
                     if (~i_15_ != -14) {
                        if (~i_15_ != -11) {
                           if (~i_15_ != -12) {
                              if (~i_15_ != -7) {
                                 if (i_15_ != 7) {
                                    if (~i_15_ != -9) {
                                       if (~i_15_ != -10) {
                                          if (i_15_ != 14) {
                                             if (~i_15_ != -16) {
                                                if (~i_15_ == -17) {
                                                   this.anInt4107 = 1;
                                                   this.anInt4104 = 8192;
                                                   this.anInt4106 = 1792;
                                                   this.anInt4093 = 256;
                                                } else {
                                                   this.anInt4106 = 0;
                                                   this.anInt4093 = 2048;
                                                   this.anInt4107 = 0;
                                                   this.anInt4104 = 2048;
                                                }
                                             } else {
                                                this.anInt4107 = 1;
                                                this.anInt4093 = 512;
                                                this.anInt4106 = 1536;
                                                this.anInt4104 = 4096;
                                             }
                                          } else {
                                             this.anInt4107 = 1;
                                             this.anInt4093 = 768;
                                             this.anInt4104 = 2048;
                                             this.anInt4106 = 1280;
                                          }
                                       } else {
                                          this.anInt4104 = 4096;
                                          this.anInt4106 = 1024;
                                          this.anInt4093 = 1024;
                                          this.anInt4107 = 3;
                                       }
                                    } else {
                                       this.anInt4104 = 2048;
                                       this.anInt4106 = 1024;
                                       this.anInt4107 = 3;
                                       this.anInt4093 = 1024;
                                    }
                                 } else {
                                    this.anInt4107 = 3;
                                    this.anInt4106 = 1280;
                                    this.anInt4093 = 768;
                                    this.anInt4104 = 4096;
                                 }
                              } else {
                                 this.anInt4106 = 1280;
                                 this.anInt4104 = 2048;
                                 this.anInt4107 = 3;
                                 this.anInt4093 = 768;
                              }
                           } else {
                              this.anInt4104 = 4096;
                              this.anInt4107 = 3;
                              this.anInt4106 = 1536;
                              this.anInt4093 = 512;
                           }
                        } else {
                           this.anInt4093 = 512;
                           this.anInt4106 = 1536;
                           this.anInt4104 = 2048;
                           this.anInt4107 = 3;
                        }
                     } else {
                        this.anInt4093 = 2048;
                        this.anInt4107 = 2;
                        this.anInt4106 = 0;
                        this.anInt4104 = 8192;
                     }
                  } else {
                     this.anInt4107 = 2;
                     this.anInt4093 = 2048;
                     this.anInt4104 = 2048;
                     this.anInt4106 = 0;
                  }
               } else {
                  this.anInt4104 = 8192;
                  this.anInt4107 = 4;
                  this.anInt4106 = 0;
                  this.anInt4093 = 2048;
               }
            } else {
               this.anInt4106 = 0;
               this.anInt4107 = 4;
               this.anInt4093 = 2048;
               this.anInt4104 = 2048;
            }
         } else {
            this.anInt4104 = 4096;
            this.anInt4106 = 0;
            this.anInt4093 = 2048;
            this.anInt4107 = 1;
         }
      } else {
         this.anInt4104 = 2048;
         this.anInt4093 = 2048;
         this.anInt4107 = 1;
         this.anInt4106 = 0;
      }

      ++anInt4089;
   }

   protected LightFX() {
      if (CacheNode_Sub20.anIntArray9628 == null) {
         Class181.method1826((byte)-115);
      }
   }

   LightFX(GraphicsToolkit graphicstoolkit, Buffer buffer, int i, int archiveId) {
      if (CacheNode_Sub20.anIntArray9628 == null) {
         Class181.method1826((byte)-115);
      }

      int planeFlag = buffer.readUnsignedByte();
      this.aBoolean4090 = (16 & planeFlag) != 0;
      this.aBoolean4102 = (planeFlag & 8) != 0;
      this.plane = 7 & planeFlag;
      int referenceX = buffer.readUnsignedShort() << i;
      int referenceY = buffer.readUnsignedShort() << i;
      int height = buffer.readUnsignedShort() << i;
      int spread = buffer.readUnsignedByte();
      int finalSpread = 2 * spread + 1;
      int[] coverage = new int[finalSpread];
      this.aShortArray4105 = new short[finalSpread];

      for(int i_21_ = 0; i_21_ < this.aShortArray4105.length; ++i_21_) {
         int i_22_ = (short)buffer.readUnsignedShort();
         coverage[i_21_] = i_22_;
         int i_23_ = i_22_ >>> 8;
         if (i_23_ >= finalSpread) {
            i_23_ = finalSpread - 1;
         }

         int i_24_ = i_22_ & 0xFF;
         if (i_24_ > finalSpread - i_23_) {
            i_24_ = finalSpread - i_23_;
         }

         this.aShortArray4105[i_21_] = (short)(i_24_ | i_23_ << 8);
      }

      int flickertype = (spread << Class36.INT_9) + Class135.INT_9_;
      int colorIndex = buffer.readUnsignedShort();
      int color = Class85.colors != null ? Class85.colors[colorIndex] : Class170.anIntArray2054['\uffff' & Node_Sub15_Sub2.method2560(5310, colorIndex)];
      int i_26_ = buffer.readUnsignedByte();
      this.anInt4094 = 1792 & i_26_ << 3;
      this.anInt4110 = i_26_ & 31;
      if (this.anInt4110 != 31) {
         this.method3822(0);
      }

      this.method3821(graphicstoolkit, referenceY, height, referenceX, color, flickertype, 1);
      if (!RSMapperClient.editor.mapEditor.dataLoaded && archiveId == RSMapperClient.mapArchiveId) {
         int regionLocalX = 64 * (RSMapperClient.regionId >> 8) - Node_Sub53.gameSceneBaseX;
         int regionLocalY = 64 * (RSMapperClient.regionId & 0xFF) - Class320_Sub4.gameSceneBaseY;
         int i_35_ = (regionLocalX << 9) + referenceX;
         int i_36_ = (regionLocalY << 9) + referenceY;
         RSMapperClient.editor
            .mapEditor
            .effects
            .put(
               new WorldTile(i_35_ >> 9, i_36_ >> 9, this.plane, true),
               new CachedEffect(referenceX, referenceY, this.plane, planeFlag, height, spread, coverage, colorIndex, i_26_)
            );
      }
   }
}
